// Generated by CoffeeScript 1.10.0
(function() {
  "State\nVarious game states/modes/screens/views/etc.\neg: Preloader Screen, Splash Screen, Play Screen, etc.";
  var A, C, H, S, State, changeState, currentState, eng;

  S = {};

  _first.offer('state', S);

  A = _first.request('assets');

  C = _first.request('config');

  H = _first.request('helper');

  eng = null;

  S.initStates = function(engine) {
    eng = engine;
    return eng.changeState(S.preload);
  };

  changeState = function(state) {
    return eng.changeState(state);
  };

  State = (function() {
    function State() {
      return;
    }

    State.prototype.enter = function() {
      return console.log("enter");
    };

    State.prototype.draw = function(ctx) {
      return console.log("draw " + ctx);
    };

    State.prototype.update = function(dt) {
      return false;
    };

    State.prototype.input = function(type, data) {
      return console.log("input: " + type + " " + data);
    };

    State.prototype.exit = function() {
      return console.log("exit");
    };

    return State;

  })();

  currentState = null;

  S.setState = function(state) {
    if (currentState) {
      currentState.exit();
    }
    state.enter();
    return currentState = state;
  };

  S.updateState = function(dt) {
    if (currentState) {
      return currentState.update(dt);
    }
  };

  S.preload = {
    enter: function() {
      console.log("enter preload");
      return A.loadAllImgs();
    },
    draw: function(ctx) {
      ctx.fillStyle = "#000000";
      return ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    },
    update: function(dt) {
      if (A.loadingFinished()) {
        A.createBgTiles();
        return changeState(S.splash);
      }
    },
    input: function(type, data) {
      console.log("input: " + type + " " + data);
      console.log(type);
      return console.log(data);
    },
    exit: function() {
      return console.log("exit preload");
    }
  };

  S.splash = {
    y: 0,
    enter: function() {
      return console.log("enter splash");
    },
    draw: function(ctx) {
      var a, img;
      ctx.fillStyle = "#000000";
      ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
      H.drawImg(ctx, A.img.bg.tile, ctx.canvas.width / 2, ctx.canvas.height / 2 + this.y);
      H.drawImg(ctx, A.img.bg.tile, ctx.canvas.width / 2, ctx.canvas.height / 2 + this.y - 1000);
      img = A.img.ship.dropciv;
      a = H.HALFPI;
      return H.drawImg(ctx, img, ctx.canvas.width / 2, ctx.canvas.height / 2, a);
    },
    update: function(dt) {
      this.y = this.y + dt / 2;
      return this.y = this.y % 1000;
    },
    input: function(type, data) {
      return console.log("input: " + type + " " + data);
    },
    exit: function() {
      return console.log("exit splash");
    }
  };

  S.play = {
    enter: function() {
      return console.log("enter play");
    },
    draw: function(ctx) {
      return console.log("draw " + ctx);
    },
    update: function(dt) {
      return false;
    },
    input: function(type, data) {
      return console.log("input: " + type + " " + data);
    },
    exit: function() {
      return console.log("exit play");
    }
  };

  S.gameOver = {
    enter: function() {
      return console.log("enter gameOver");
    },
    draw: function(ctx) {
      return console.log("draw " + ctx);
    },
    update: function(model) {
      return console.log("update " + model);
    },
    input: function(type, data) {
      return console.log("input: " + type + " " + data);
    },
    exit: function() {
      return console.log("exit gameOver");
    }
  };

}).call(this);

// Generated by CoffeeScript 1.10.0
(function() {
  "Asteroids in Coffeescript\nor\nLook Out Space Mice!\n\nThis is a learning project made while learning coffeescript.";
  "Some things learned:\n\n\n\nTODO:\n\n\nThings to try:\n1) Proper build tools/package managers.\n2) Things other than canvas\n";
  var E, H, L, ctx, engine, lastTime, raf, setup, stopToken;

  H = _first.request('helper');

  L = _first.request('loader');

  E = _first.request('engine');

  ctx = null;

  engine = null;

  $(function() {
    console.log("DOM ready");
    _first.applyAllModules();
    setup();
    return raf();
  });

  setup = function() {
    var $canvas;
    L.loadAllImgs();
    $canvas = $('<canvas>', {
      'id': 'gameCanvas'
    });
    $('#addCanvasHere').append($canvas);
    ctx = $canvas[0].getContext('2d');
    engine = new E.Engine(ctx);
    return console.log('setup');
  };

  stopToken = null;

  lastTime = 0;

  raf = function(time) {
    var dt;
    if (time == null) {
      time = 0;
    }
    dt = time - lastTime;
    lastTime = time;
    stopToken = requestAnimationFrame(raf);
    engine.draw();
    return engine.update(dt);
  };

}).call(this);
